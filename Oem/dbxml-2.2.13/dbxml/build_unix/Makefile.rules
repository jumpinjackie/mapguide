#############################################################################
# COMMON MAKEFILE RULES
# $Id: Makefile.rules,v 1.3 2005/03/09 17:16:40 gmf Exp $
#############################################################################

###### Build 

objects: $(patsubst %.c,$(builddir)/%$(OBJECT_POSTFIX),${SOURCES:%.cpp=$(builddir)/%$(OBJECT_POSTFIX)})

all: objects

###### Include dependences

-include $(patsubst %.c, $(builddir)/%.d,$(patsubst %.cpp,$(builddir)/%.d,$(SOURCES)))

###### Include implicit rules

$(builddir)/%$(OBJECT_POSTFIX): %.cpp
	@$(CXX) $(CXXFLAGS) -o $@ $<

$(builddir)/%$(OBJECT_POSTFIX): %.c
	@$(CC) $(CFLAGS) -o $@ $<

$(builddir)/%.d: %.cpp	
	$(buildcppdep)

$(builddir)/%.d: %.c 
	$(buildccdep)

###### Default rule
.DEFAULT:
	@echo Can\'t make $@
