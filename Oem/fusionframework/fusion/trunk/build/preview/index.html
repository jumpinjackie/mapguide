<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Sample Fusion Application</title>
<!-- change the source of the following tag to point to your fusion installation -->
<script type="text/javascript" src="../../fusion/lib/fusion.js"></script>

<style type="text/css">
    @import url(../../fusion/jx/css/jxskin-graphic.css);

    .jxSplitterBar {
        width: 2px;
        background-color: #999;
    }

    #Toolbar .jxToolbar {
        /*width: 100%;*/
    }

    #Map {
        border-right: 1px solid #999;
        border-bottom: 1px solid #999;
    }

    li.jxToolItem.activityIndicator {
        float: right;
        padding: 7px 3px;
    }
</style>

<script type="text/javascript">

var ready = false;

window.onload = function() {
	ready = false;
    /* make 'thePage' just fill the browser window and resize automagically
       the user resizes the browser */
    new Jx.Layout('thePage');
    /* the height of toolbars.  For jxskin-border,
     * its 28 and for jxskin-graphic its 30 */
    var h = 30;
    new Jx.Layout('Main');
    new Jx.Layout('Toolbar', {height: h, bottom: null});
    new Jx.Layout('Splitter', {top: h});

    var splitter = new Jx.Splitter('Splitter', {elements: [$('PanelPane'), $('Map')], containerOptions: [{width: 200}, {}]});

    var p1 = new Jx.Panel({label: 'Legend'});
    p1.content.id = 'Legend';
    var p2 = new Jx.Panel({label: 'Selection'});
    p2.content.id = 'SelectionPanel';
    var p3 = new Jx.Panel({label: 'Overview Map'});
    p3.content.id = 'OverviewMap';
    var pm = new Jx.PanelManager('PanelPane', [p1, p2, p3]);

    $('thePage').resize();
    $('thePage').style.visibility = 'visible';

    Fusion.registerForEvent(Fusion.Event.FUSION_INITIALIZED, fusionInitialized);
    Fusion.registerForEvent(Fusion.Event.FUSION_ERROR, fusionError);
    Fusion.initialize();
}

function fusionError(eventId, error) {
    //console.log('Fusion Error: \n' + error.toString());
}

function fusionInitialized() {
    $('thePage').resize();
    var map = Fusion.getWidgetById('Map');
    var l = new Jx.Layout($('Toolbar').childNodes[0]);
    l.resize();
    var widgets = Fusion.getWidgetsByType('ActivityIndicator');
    Element.addClassName(widgets[0].domObj, 'activityIndicator');
    ready = true;
}

</script>
</head>

<body>
<div id="thePage" style="visibility: hidden">
    <div id="Main">
        <div id="Toolbar"></div>
        <div id="Splitter">
            <div id="PanelPane"></div>
            <div id="Map"></div>
        </div>
    </div>
</div>
<div id="ActivityIndicator" style="visibility: hidden;">
    <img src="images/icon_loading.gif" width="30" height="14">
</div>
</body>
</html>