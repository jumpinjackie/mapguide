<!--Copyright (c) 1997-2009 Oracle.  All rights reserved.-->
<!--See the file LICENSE for redistribution information.-->
<html>
<head>
<title>Berkeley DB XML: XmlContainer::addIndex</title>
<meta name="description" content="Berkeley DB: An embedded database programmatic toolkit.">
<meta name="keywords" content="embedded,database,programmatic,toolkit,btree,hash,hashing,transaction,transactions,locking,logging,access method,access methods,Java,C,C++">
</head>
<body bgcolor=white>
<table width="100%"><tr valign=top>
<td>
<b>XmlContainer::addIndex</b>
</td>
<td align=right>
<a href="../../api_reference/CXX/api_xml.html"><img src="../../images/api.gif" alt="API"></a>
<a href="../../ref_xml/toc.html"><img src="../../images/ref.gif" alt="Ref"></a></td>
</tr></table>
<hr size=1 noshade>
<tt>
<b><pre>
#include &lt;DbXml.hpp&gt;
<p>
void
XmlContainer::addIndex(
    const std::string &uri,
    const std::string &name,
    const std::string &index,
    XmlUpdateContext &context)
<p>
XmlContainer::addIndex(
    XmlTransaction &txn,
    const std::string &uri,
    const std::string &name,
    const std::string &index,
    XmlUpdateContext &context)
<p>
XmlContainer::addIndex(
    const std::string &uri,
    const std::string &name,
    XmlIndexSpecification::Type type,
    XmlValue::Type syntax,
    XmlUpdateContext &context)
<p>
XmlContainer::addIndex(
    XmlTransaction &txn,
    const std::string &uri,
    const std::string &name,
    XmlIndexSpecification::Type type,
    XmlValue::Type syntax,
    XmlUpdateContext &context)
</pre></b>
<hr size=1 noshade>
<b>Description: XmlContainer::addIndex</b>
<p>Adds an index of the specified type for the named document node.  These
method are for convenience -- see <a href="../../api_reference/CXX/XmlIndexSpecification_addIndex.html">XmlIndexSpecification::addIndex</a>
for more information.</p>
<hr size=1 noshade>
<b>Description: XmlContainer::addIndex(XmlTransaction &txn, const std::string &uri, const std::string &name, const std::string &index, XmlUpdateContext &context)</b>
<p>Identifies one or more indexing strategies to set for the identified
node. The strategies are identified as a space-separated listing of
strings.</p>
<b>Parameters</b> <br>
 <b>txn</b><ul compact><li>If the operation is to be transaction-protected, the <b>txn</b>
parameter is an <a href="../../api_reference/CXX/XmlTransaction.html">XmlTransaction</a> handle returned from
<a href="../../api_reference/CXX/XmlManager_createTransaction.html">XmlManager::createTransaction</a>.</ul>
 <b>uri</b><ul compact><li>The namespace of the node to be indexed. The default namespace is
selected by passing an empty string for the namespace.</ul>
 <b>name</b><ul compact><li>The name of the element or attribute node to be indexed.</ul>
 <b>index</b><ul compact><li>A comma-separated list of strings that represent the indexing strategy.
The strings must contain the following information in the following order:
<blockquote><pre><b>unique</b>-{path type}-{node type}-{key type}-{syntax}</pre></blockquote>
<p>where:</p>
<p><b>unique</b> indicates that the indexed value is unique in the
container. If this keyword does not appear on the index string, then the
indexed value is not required to be unique in the container.</p>
<p>{path type} is either <b>node</b> or <b>edge</b>.</p>
<p>{node type} is one of <b>element</b>, <b>attribute</b>, or
<b>metadata</b>. If <b>metadata</b> is specified, then {path type}
must be <b>node</b>.</p>
<p>{key type} is one of <b>presence</b>, <b>equality</b>, or
<b>substring</b>.</p>
<p>{syntax} identifies the type of information being indexed. It must be one of the
following values:</p>
<p><ul type=disc>
<li>none
<li>base64Binary
<li>boolean
<li>date
<li>dateTime
<li>decimal
<li>double
<li>duration
<li>float
<li>gDay
<li>gMonth
<li>gMonthDay
<li>gYear
<li>gYearMonth
<li>hexBinary
<li>string
<li>time
</ul>
<p>Note that if {key type} is <b>presence</b>, then {syntax} must be
<b>none</b> or simply not specified.</p>
<p>For example, examples index strings are:</p>
<blockquote><pre><b>unique-node-element-presence</b></pre></blockquote>
<blockquote><pre><b>node-element-equality-string</b></pre></blockquote>
<blockquote><pre><b>edge-element-presence-none</b></pre></blockquote>
<blockquote><pre><b>node-element-equality-float</b></pre></blockquote></ul>
 <b>context</b><ul compact><li>The update context to use for the index insertion.</ul>
<br>
<br><b>Errors</b>
<p>The XmlContainer::addIndex method
may fail and throw
<a href="../../api_reference/CXX/XmlException.html">XmlException</a>,
encapsulating one of the following non-zero errors:</p>
<br>
<b>DATABASE_ERROR</b><ul compact><li>An error occurred in an underlying Berkeley DB database. The
<a href="../../api_reference/CXX/XmlException_getDbErrno.html">XmlException::getDbErrno</a> method will return the error code for the error.</ul>
<br>
<br>
<b>UNKNOWN_INDEX</b><ul compact><li>Unknown index specification</ul>
<br>
<hr size=1 noshade>
<b>Description: XmlContainer::addIndex(XmlTransaction &txn, const std::string &uri, const std::string &name, XmlIndexSpecification::Type type, XmlValue::Type syntax, XmlUpdateContext &context)</b>
<p>Identifies an indexing strategy to set for the identified node. The
strategy is set using enumeration values for the index and the syntax.</p>
<b>Parameters</b> <br>
 <b>txn</b><ul compact><li>If the operation is to be transaction-protected, the <b>txn</b>
parameter is an <a href="../../api_reference/CXX/XmlTransaction.html">XmlTransaction</a> handle returned from
<a href="../../api_reference/CXX/XmlManager_createTransaction.html">XmlManager::createTransaction</a>.</ul>
 <b>uri</b><ul compact><li>The namespace of the node to be indexed. The default namespace is
selected by passing an empty string for the namespace.</ul>
 <b>name</b><ul compact><li>The name of the element or attribute node to be indexed.</ul>
 <b>type</b><ul compact><li>A series of XmlIndexSpecification::Type values bitwise <b>OR</b>'d
together to form the index strategy.
<p>To indicate whether the indexed value must be unique container-wide, use
one of the following, or leave the value out entirely:</p>
<p><ul type=disc>
<li>XmlIndexSpecification::UNIQUE_OFF
<li>XmlIndexSpecification::UNIQUE_ON
</ul>
<p>To identify the path type, use one of the following:</p>
<p><ul type=disc>
<li>XmlIndexSpecification::PATH_NODE
<li>XmlIndexSpecification::PATH_EDGE
</ul>
<p>To identify the node type, use one of the following:</p>
<p><ul type=disc>
<li>XmlIndexSpecification::NODE_ELEMENT
<li>XmlIndexSpecification::NODE_ATTRIBUTE
<li>XmlIndexSpecification::NODE_METADATA
</ul>
<p>Note that if XmlIndexSpecification::NODE_METADATA is used, then
XmlIndexSpecification::PATH_NODE must also be used as well.</p>
<p>To identify the key type, use one of the following:</p>
<p><ul type=disc>
<li>XmlIndexSpecification::KEY_PRESENCE
<li>XmlIndexSpecification::KEY_EQUALITY
<li>XmlIndexSpecification::KEY_SUBSTRING
</ul>
<p>For example:</p>
<blockquote><pre>XmlIndexSpecification::PATH_NODE | XmlIndexSpecification::NODE_ELEMENT | XmlIndexSpecification::KEY_SUBSTRING</pre></blockquote></ul>
 <b>syntax</b><ul compact><li><p>Identifies the type of information being indexed. The value must be one
of the XmlValue enumerated types:</p>
<p><ul type=disc>
<li>XmlValue::NONE
<li>XmlValue::BASE_64_BINARY
<li>XmlValue::BOOLEAN
<li>XmlValue::DATE
<li>XmlValue::DATE_TIME
<li>XmlValue::DECIMAL
<li>XmlValue::DOUBLE
<li>XmlValue::DURATION
<li>XmlValue::FLOAT
<li>XmlValue::G_DAY
<li>XmlValue::G_MONTH
<li>XmlValue::G_MONTH_DAY
<li>XmlValue::G_YEAR
<li>XmlValue::G_YEAR_MONTH
<li>XmlValue::HEX_BINARY
<li>XmlValue::STRING
<li>XmlValue::TIME
</ul>
<p>Note that if XmlIndexSpecification::KEY_PRESENCE is specified for
<b>type</b>, then this parameter must be
<b>XmlValue::NONE</b>.</p></ul>
 <b>context</b><ul compact><li>The update context to use for the index insertion.</ul>
<br>
<br><b>Errors</b>
<p>The XmlContainer::addIndex method
may fail and throw
<a href="../../api_reference/CXX/XmlException.html">XmlException</a>,
encapsulating one of the following non-zero errors:</p>
<br>
<b>DATABASE_ERROR</b><ul compact><li>An error occurred in an underlying Berkeley DB database. The
<a href="../../api_reference/CXX/XmlException_getDbErrno.html">XmlException::getDbErrno</a> method will return the error code for the error.</ul>
<br>
<br>
<b>UNKNOWN_INDEX</b><ul compact><li>Unknown index specification</ul>
<br>
</tt>
<table width="100%"><tr><td><br></td><td align=right>
<a href="../../api_reference/CXX/api_xml.html"><img src="../../images/api.gif" alt="API"></a><a href="../../ref_xml/toc.html"><img src="../../images/ref.gif" alt="Ref"></a>
</td></tr></table>
<p><font size=1>Copyright (c) 1996-2009 Oracle.  All rights reserved.</font>
</body>
</html>
