include_directories(${CMAKE_CURRENT_SOURCE_DIR}
    ${CMAKE_CURRENT_SOURCE_DIR}/..)

set (dwftk_SRCS
    Toolkit.cpp
    #dwfx
    dwfx/Constants.cpp
    dwfx/ContentPart.cpp
    dwfx/CustomProperties.cpp
    dwfx/DocumentPresentationsPart.cpp
    dwfx/DWFDocument.cpp
    dwfx/DWFDocumentSequence.cpp
    dwfx/DWFProperties.cpp
    dwfx/DWFSection.cpp
    dwfx/FixedDocument.cpp
    dwfx/FixedDocumentSequence.cpp
    dwfx/FixedPage.cpp
    dwfx/Package.cpp
    dwfx/ResourcePart.cpp
    dwfx/reader/CustomPropertiesReader.cpp
    dwfx/reader/DWFDocumentSequenceReader.cpp
    dwfx/reader/DWFPropertiesReader.cpp
    dwfx/reader/FixedPageResourceExtractor.cpp
    #opc
    opc/Constants.cpp
    opc/ContentTypes.cpp
    opc/CoreProperties.cpp
    opc/Package.cpp
    opc/Part.cpp
    opc/PartContainer.cpp
    opc/PhysicalLayerReader.cpp
    opc/PhysicalLayerWriter.cpp
    opc/Relationship.cpp
    opc/RelationshipContainer.cpp
    opc/XMLPart.cpp
    opc/ZipFileReader.cpp
    opc/ZipWriter.cpp
    opc/reader/CorePropertiesReader.cpp
    opc/reader/RelationshipContainerReader.cpp
    #package
    package/Bookmark.cpp
    package/Class.cpp
    package/Constants.cpp
    package/Content.cpp
    package/ContentElement.cpp
    package/ContentManager.cpp
    package/CoordinateSystem.cpp
    package/CustomSection.cpp
    package/DataSection.cpp
    package/DefinedObject.cpp
    package/EModelSection.cpp
    package/Entity.cpp
    package/EPlotSection.cpp
    package/Feature.cpp
    package/FontResource.cpp
    package/GlobalSection.cpp
    package/GraphicResource.cpp
    package/Group.cpp
    package/Instance.cpp
    package/Interface.cpp
    package/Manifest.cpp
    package/Object.cpp
    package/ObjectDefinition.cpp
    package/ObjectDefinitionResource.cpp
    package/Paper.cpp
    package/Property.cpp
    package/PropertySet.cpp
    package/Resource.cpp
    package/Section.cpp
    package/SectionBuilder.cpp
    package/SectionContentResource.cpp
    package/Signature.cpp
    package/SignatureRequest.cpp
    package/SignatureResource.cpp
    package/SignatureSection.cpp
    package/Source.cpp
    package/Units.cpp
    package/X509.cpp
    package/XML.cpp
    package/reader/ContentReader.cpp
    package/reader/ContentResourceReader.cpp
    package/reader/DataSectionDescriptorReader.cpp
    package/reader/DuplicateAttributeFilter.cpp
    package/reader/EModelSectionDescriptorReader.cpp
    package/reader/EPlotSectionDescriptorReader.cpp
    package/reader/GlobalSectionDescriptorReader.cpp
    package/reader/ObjectDefinitionReader.cpp
    package/reader/PackageManifestReader.cpp
    package/reader/PackageReader.cpp
    package/reader/SectionDescriptorReader.cpp
    package/reader/SignatureReader.cpp
    package/reader/SignatureSectionDescriptorReader.cpp
    package/utility/DefinedObjectContainer.cpp
    package/utility/DWFPackageFileDescriptor.cpp
    package/utility/PropertyContainer.cpp
    package/utility/ResourceContainer.cpp
    package/writer/DWF6PackageWriter.cpp
    package/writer/DWFXPackageWriter.cpp
    package/writer/PackageWriter.cpp
    package/writer/extensions/6.0/PackageVersionExtension60.cpp
    package/writer/extensions/6.01/PackageVersionExtension601.cpp
    package/writer/extensions/6.11/PackageVersionExtension611.cpp
    package/writer/extensions/6.20/PackageVersionExtension620.cpp
    #presentation
    presentation/ContentPresentation.cpp
    presentation/ContentPresentationModelViewNode.cpp
    presentation/ContentPresentationNode.cpp
    presentation/ContentPresentationReferenceNode.cpp
    presentation/ContentPresentationResource.cpp
    presentation/ContentPresentationView.cpp
    presentation/ModelScene.cpp
    presentation/PropertyReference.cpp
    presentation/ContentPresentationDocument.cpp
    presentation/PackageContentPresentations.cpp
    presentation/reader/ContentPresentationReader.cpp
    presentation/utility/ContentPresentationContainer.cpp
    presentation/utility/ContentPresentationNodeContainer.cpp
    presentation/utility/ContentPresentationViewContainer.cpp
    presentation/utility/PropertyReferenceContainer.cpp
    #publisher
    publisher/EmbeddedFont.cpp
    publisher/PublishedObject.cpp
    publisher/data/Data.cpp
    publisher/impl/ContentElementPropertyVisitor.cpp
    publisher/impl/DefinedObjectPropertyVisitor.cpp
    publisher/impl/DWF6PackagePublisher.cpp
    publisher/impl/DWFPackagePublisher.cpp
    publisher/impl/DWFXPackagePublisher.cpp
    publisher/impl/PublishedContentElement.cpp
    publisher/impl/PublishedDefinedObject.cpp
    publisher/model/IncludeSegment.cpp
    publisher/model/Model.cpp
    publisher/model/Segment.cpp
    publisher/model/StyleSegment.cpp
    publisher/plot/Plot.cpp
    #w3dtk
    w3dtk/BCompress.cpp
    w3dtk/BCompressData.cpp
    w3dtk/BEdgeBreakerCommon.cpp
    w3dtk/BEdgeBreakerCompress.cpp
    w3dtk/BEdgeBreakerDecompress.cpp
    w3dtk/BOpcodeHandler.cpp
    w3dtk/BOpcodeShell.cpp
    w3dtk/BPointCloud.cpp
    w3dtk/BPolyhedron.cpp
    w3dtk/BPolyPoly.cpp
    w3dtk/BStreamFileToolkit.cpp
    w3dtk/W3DCamera.cpp
    w3dtk/W3DStreamWriter.cpp
    w3dtk/BPolyhedronAscii.cpp
    w3dtk/BOpcodeShellAscii.cpp
    w3dtk/BAscii.cpp
    w3dtk/hoops/fastlod.c
    w3dtk/hoops/mxmain.c
    w3dtk/hoops/mxmath.c
    w3dtk/hoops/mxmetric.c
    w3dtk/hoops/mxmodel.c
    w3dtk/hoops/mxqslim.c
    w3dtk/hoops/mxtype.c
    w3dtk/hoops/shellopt.cpp
    w3dtk/hoops/trialate.c
    # DISABLE_STREAM_JPEG
    #w3dtk/jpeg/jcapimin.c
    #w3dtk/jpeg/jcomapi.c
    #w3dtk/jpeg/jdcoefct.c
    #w3dtk/jpeg/jdpostct.c
    #w3dtk/jpeg/jidctred.c
    #w3dtk/jpeg/jcapistd.c
    #w3dtk/jpeg/jcparam.c
    #w3dtk/jpeg/jdcolor.c
    #w3dtk/jpeg/jdsample.c
    #w3dtk/jpeg/jccoefct.c
    #w3dtk/jpeg/jcphuff.c
    #w3dtk/jpeg/jddctmgr.c
    #w3dtk/jpeg/jdtrans.c
    #w3dtk/jpeg/jccolor.c
    #w3dtk/jpeg/jcprepct.c
    #w3dtk/jpeg/jdhuff.c
    #w3dtk/jpeg/jerror.c
    #w3dtk/jpeg/jcdctmgr.c
    #w3dtk/jpeg/jcsample.c
    #w3dtk/jpeg/jdinput.c
    #w3dtk/jpeg/jfdctflt.c
    #w3dtk/jpeg/jmemmgr.c
    #w3dtk/jpeg/jchuff.c
    #w3dtk/jpeg/jctrans.c
    #w3dtk/jpeg/jdmainct.c
    #w3dtk/jpeg/jfdctfst.c
    #w3dtk/jpeg/jcinit.c
    #w3dtk/jpeg/jdapimin.c
    #w3dtk/jpeg/jdmarker.c
    #w3dtk/jpeg/jfdctint.c
    #w3dtk/jpeg/jmemnobs.c
    #w3dtk/jpeg/jcmainct.c
    #w3dtk/jpeg/jdapistd.c
    #w3dtk/jpeg/jdmaster.c
    #w3dtk/jpeg/jidctflt.c
    #w3dtk/jpeg/jquant1.c
    #w3dtk/jpeg/jcmarker.c
    #w3dtk/jpeg/jdatadst.c
    #w3dtk/jpeg/jdmerge.c
    #w3dtk/jpeg/jidctfst.c
    #w3dtk/jpeg/jquant2.c
    #w3dtk/jpeg/jcmaster.c
    #w3dtk/jpeg/jdatasrc.c
    #w3dtk/jpeg/jdphuff.c
    #w3dtk/jpeg/jidctint.c
    #w3dtk/jpeg/jutils.c
    w3dtk/utility/cache_memory_object.cpp
    w3dtk/utility/huffman.cpp
    w3dtk/utility/tempfile_utils.cpp
    w3dtk/utility/utf_utils.cpp
    w3dtk/utility/vconf.cpp
    w3dtk/utility/vdlist.cpp
    w3dtk/utility/vhash.cpp
    w3dtk/utility/vlist.cpp
    w3dtk/utility/vlogfile.cpp
    #whiptk
    whiptk/assert.cpp
    whiptk/attribute.cpp
    whiptk/attribute_url.cpp
    whiptk/backgrnd.cpp
    whiptk/blockref.cpp
    whiptk/blockref_defs.cpp
    whiptk/blockref_list.cpp
    whiptk/code_page.cpp
    whiptk/color.cpp
    whiptk/colormap.cpp
    whiptk/compdata.cpp
    whiptk/contour_set.cpp
    whiptk/contrastcolor.cpp
    whiptk/convert_utf.cpp
    whiptk/dashpat.cpp
    whiptk/delineate.cpp
    whiptk/directory.cpp
    whiptk/dpat_list.cpp
    whiptk/drawable.cpp
    whiptk/dwfhead.cpp
    whiptk/dwginfo.cpp
    whiptk/ellipse.cpp
    whiptk/embed.cpp
    whiptk/embedded_font.cpp
    whiptk/endofdwf.cpp
    whiptk/file.cpp
    whiptk/file_stats.cpp
    whiptk/filetime.cpp
    whiptk/fill.cpp
    whiptk/fillpat.cpp
    whiptk/font.cpp
    whiptk/font_extension.cpp
    whiptk/font_options.cpp
    whiptk/gouraud_pointset.cpp
    whiptk/gouraud_polyline.cpp
    whiptk/gouraud_polytri.cpp
    whiptk/group_begin.cpp
    whiptk/group_end.cpp
    whiptk/guid_list.cpp
    whiptk/heuristics.cpp
    whiptk/image.cpp
    whiptk/informational.cpp
    whiptk/inked_area.cpp
    whiptk/layer.cpp 
    whiptk/layer_list.cpp
    whiptk/linepat.cpp
    whiptk/linestyle.cpp
    whiptk/logical_point.cpp
    whiptk/lweight.cpp
    whiptk/lz77comp.cpp
    whiptk/lz77decp.cpp
    whiptk/macro_definition.cpp
    whiptk/macro_draw.cpp
    whiptk/macro_scale.cpp
    whiptk/macro_index.cpp
    whiptk/marksize.cpp
    whiptk/marksymb.cpp
    whiptk/matrix.cpp
    whiptk/merge_control.cpp
    whiptk/named_view.cpp
    whiptk/named_view_list.cpp
    whiptk/object.cpp
    whiptk/object_node.cpp
    whiptk/object_node_list.cpp
    whiptk/object_stream.cpp
    whiptk/opcode.cpp
    whiptk/origin.cpp
    whiptk/overpost.cpp
    whiptk/pattern_scale.cpp
    whiptk/pch.cpp
    whiptk/penpat.cpp
    whiptk/penpat_options.cpp
    whiptk/plot_optimized.cpp
    whiptk/plotinfo.cpp
    whiptk/pnggroup4image.cpp
    whiptk/pointset.cpp
    whiptk/polygon.cpp
    whiptk/polyline.cpp
    whiptk/polymark.cpp
    whiptk/polytri.cpp
    whiptk/projection.cpp
    whiptk/rendition.cpp
    whiptk/rendopts.cpp
    whiptk/signdata.cpp
    whiptk/text.cpp
    whiptk/text_background.cpp
    whiptk/text_options.cpp
    whiptk/text_halign.cpp
    whiptk/text_valign.cpp
    whiptk/timestamp.cpp
    whiptk/trusted_font_list.cpp
    whiptk/units.cpp
    whiptk/unknown.cpp
    whiptk/url.cpp
    whiptk/url_list.cpp
    whiptk/userdata.cpp
    whiptk/usrfillpat.cpp
    whiptk/usrhatchpat.cpp
    whiptk/view.cpp
    whiptk/viewport.cpp
    whiptk/viewport_options.cpp
    whiptk/visible.cpp
    whiptk/wtstring.cpp
    whiptk/class_factory.cpp
    whiptk/w2d_class_factory.cpp
    #XAML
    #xps
    xps/Constants.cpp
    xps/FixedDocument.cpp
    xps/FixedDocumentSequence.cpp
    xps/FixedPage.cpp
    xps/Package.cpp
    xps/XPSDocRefResourceExtractor.cpp
    xps/XPSFixedDocumentResourceExtractor.cpp
    xps/XPSFixedPageResourceExtractor.cpp
    xps/XPSFontResourceExtractor.cpp
)

add_library(dwftk-${DWF_VERSION} SHARED ${dwftk_SRCS})
target_link_libraries(dwftk-${DWF_VERSION} 
    -Wl,-Bsymbolic
    dwfcore-${DWFCORE_VERSION})

configure_file(${CMAKE_CURRENT_SOURCE_DIR}/config.h.in ${CMAKE_CURRENT_BINARY_DIR}/config.h)