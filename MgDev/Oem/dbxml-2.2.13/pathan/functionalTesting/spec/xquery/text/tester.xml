<?xml version="1.0" encoding="utf-8"?>
<test purpose="xquery_use_cases">
  <policies>
    <policy name="text">
      <addArg>company.xml</addArg>
    </policy>
    <default>
      <program>../../../../samples/evaluator/eval</program>
    </default>
  </policies>
  <base type="pass">
    <arg>(//news_item/title[contains(./text(), &quot;Foobar Corporation&quot;)])</arg>
    <output>&lt;title&gt;Foobar Corporation releases its new line of Foo products
   today&lt;/title&gt;
&lt;title&gt;Foobar Corporation is suing Gorilla Corporation for
   patent infringement &lt;/title&gt;
</output>
  </base>
  <base type="pass">
    <arg>(for $item in //news_item[some $t in //title satisfies (contains($t/text(), &quot;Foobar Corporation&quot;) and (some $partner in (doc(&quot;company-data.xml&quot;)//company[name = &quot;Foobar Corporation&quot;]//partner) satisfies contains($t/text(), $partner/text()))) or (some $par in .//par satisfies (contains(string($par), &quot;Foobar Corporation&quot;) and (some $partner in (doc(&quot;company-data.xml&quot;)//company[name = &quot;Foobar Corporation&quot;]//partner) satisfies contains(string($par), $partner/text()))))] return (&quot;&lt;news_item&gt;&quot;, $item/title, $item/date, &quot;&lt;/news_item&gt;&quot; ))</arg>
    <output>&lt;news_item&gt;
&lt;title&gt; Gorilla Corporation acquires YouNameItWeIntegrateIt.com &lt;/title&gt;
&lt;date&gt;1-20-2000&lt;/date&gt;
&lt;/news_item&gt;
&lt;news_item&gt;
&lt;title&gt;Foobar Corporation releases its new line of Foo products
   today&lt;/title&gt;
&lt;date&gt;1-20-2000&lt;/date&gt;
&lt;/news_item&gt;
&lt;news_item&gt;
&lt;title&gt;Foobar Corporation is suing Gorilla Corporation for
   patent infringement &lt;/title&gt;
&lt;date&gt;1-20-2000&lt;/date&gt;
&lt;/news_item&gt;
</output>
  </base>
  <base type="pass">
    <arg>(for $item in //news_item, $c in doc(&quot;company-data.xml&quot;)//company  return if (contains(string($item), $c/name) and (some $p in (doc(&quot;company-data.xml&quot;)//company[name = $c/name]//partner) satisfies contains(string($item), $p) and $item/news_agent != $c/name)) then $item else ())</arg>
    <output>&lt;news_item&gt;
   &lt;title&gt; Gorilla Corporation acquires YouNameItWeIntegrateIt.com &lt;/title&gt;
   &lt;content&gt;
      &lt;par&gt; Today, Gorilla Corporation announced that it will purchase
          YouNameItWeIntegrateIt.com. The shares of
          YouNameItWeIntegrateIt.com dropped $3.00 as a result of this
          announcement.
      &lt;/par&gt;

      &lt;par&gt; As a result of this acquisition, the CEO of
          YouNameItWeIntegrateIt.com Bill Smarts resigned. He did not
          announce what he will do next.  Sources close to
          YouNameItWeIntegrateIt.com hint that Bill Smarts might be
          taking a position in Foobar Corporation.
      &lt;/par&gt;

      &lt;par&gt;YouNameItWeIntegrateIt.com is a leading systems integrator
          that enables &lt;quote&gt;brick and mortar&lt;/quote&gt; companies to
          have a presence on the web.
      &lt;/par&gt;

   &lt;/content&gt;
   &lt;date&gt;1-20-2000&lt;/date&gt;
   &lt;author&gt;Mark Davis&lt;/author&gt;
   &lt;news_agent&gt;News Online&lt;/news_agent&gt;
&lt;/news_item&gt;
&lt;news_item&gt; &lt;title&gt;Foobar Corporation is suing Gorilla Corporation for
   patent infringement &lt;/title&gt;
   &lt;content&gt;
      &lt;par&gt; In surprising developments today, Foobar Corporation
         announced that it is suing Gorilla Corporation for patent
         infringement. The patents that were mentioned as part of the
         lawsuit are considered to be the basis of Foobar
         Corporation's &lt;quote&gt;Wireless Foo&lt;/quote&gt; line of products.
      &lt;/par&gt;
      &lt;par&gt;The tension between Foobar and Gorilla Corporations has
         been increasing ever since the Gorilla Corporation acquired
         more than 40 engineers who have left Foobar Corporation,
         TheAppCompany Inc. and YouNameItWeIntegrateIt.com over the
         past 3 months. The engineers who have left the Foobar
         corporation and its partners were rumored to be working on
         the next generation of server products and applications which
         will directly compete with Foobar's Foo 20.9 servers. Most of
         the engineers have relocated to Hawaii where the Gorilla
         Corporation's server development is located.
      &lt;/par&gt;
   &lt;/content&gt;
   &lt;date&gt;1-20-2000&lt;/date&gt;
   &lt;news_agent&gt;Reliable News Corporation&lt;/news_agent&gt;
&lt;/news_item&gt;
</output>
  </base>
  <base type="pass">
    <arg>(for $item in //news_item[contains(string(content), &quot;Gorilla Corporation&quot;)] return (&quot;&lt;item_summary&gt;&quot;, $item/title/text(), $item/date/text(), string(($item//par)[1]), &quot;&lt;/item_summary&gt;&quot; ))</arg>
    <output>&lt;item_summary&gt;
 Gorilla Corporation acquires YouNameItWeIntegrateIt.com 
1-20-2000
 Today, Gorilla Corporation announced that it will purchase
          YouNameItWeIntegrateIt.com. The shares of
          YouNameItWeIntegrateIt.com dropped $3.00 as a result of this
          announcement.
      
&lt;/item_summary&gt;
&lt;item_summary&gt;
Foobar Corporation is suing Gorilla Corporation for
   patent infringement 
1-20-2000
 In surprising developments today, Foobar Corporation
         announced that it is suing Gorilla Corporation for patent
         infringement. The patents that were mentioned as part of the
         lawsuit are considered to be the basis of Foobar
         Corporation's Wireless Foo line of products.
      
&lt;/item_summary&gt;
</output>
  </base>
</test>