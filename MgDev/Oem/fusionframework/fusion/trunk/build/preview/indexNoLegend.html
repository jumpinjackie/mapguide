<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Sample Fusion Application</title>
<!-- change the source of the following tag to point to your fusion installation -->
<script type="text/javascript" src="../../fusion/lib/fusion.js"></script>

<style type="text/css">
    @import url(../../fusion/jx/css/jxskin-graphic.css);

    .jxSplitterBar {
        width: 2px;
        background-color: #999;
    }

    #Toolbar .jxToolbar {
        /*width: 100%;*/
    }

    #Map {
        border-right: 1px solid #999;
        border-bottom: 1px solid #999;
    }

    li.jxToolItem.activityIndicator {
        float: right;
        padding: 7px 3px;
    }
</style>

<script type="text/javascript">
window.onload = function() {
    /* make 'thePage' just fill the browser window and resize automagically
       the user resizes the browser */
    new Jx.Layout('thePage');
    /* the height of toolbars.  For jxskin-border,
     * its 28 and for jxskin-graphic its 30 */
    var h = 30;
    new Jx.Layout('Main');
    new Jx.Layout('Toolbar', {height: h, bottom: null});
    new Jx.Layout('Map', {top: h});

    $('thePage').resize();
    $('thePage').style.visibility = 'visible';

    Fusion.registerForEvent(Fusion.Event.FUSION_INITIALIZED, fusionInitialized);
    Fusion.registerForEvent(Fusion.Event.FUSION_ERROR, fusionError);
    Fusion.initialize();
}

function getScale()
{
	var scale = -1.0;

	var mapWidget = Fusion.getWidgetById('Map');
	if(mapWidget)
	{
		scale = mapWidget.getScale();
	}
	return scale;
}

function getCenterX()
{
	var centerX = 0.0;

	var mapWidget = Fusion.getWidgetById('Map');
	if(mapWidget)
	{
		centerX = mapWidget.getCurrentCenter().x;
	}
	return centerX;
}

function getCenterY()
{
	var centerY = 0.0;

	var mapWidget = Fusion.getWidgetById('Map');
	if(mapWidget)
	{
		centerY = mapWidget.getCurrentCenter().y;
	}
	return centerY;
}

function getExtX1()
{
	var value = 0.0;

	var mapWidget = Fusion.getWidgetById('Map');
	if(mapWidget)

	{
		value = mapWidget.getCurrentExtents().left;
	}
	return value;
}

function getExtX2()
{
	var value = 0.0;
	var mapWidget = Fusion.getWidgetById('Map');
	if(mapWidget)
	{
		value = mapWidget.getCurrentExtents().right;
	}
	return value;
}

function getExtY1()
{
	var value = 0.0;
	var mapWidget = Fusion.getWidgetById('Map');
	if(mapWidget)
	{
		value = mapWidget.getCurrentExtents().bottom;
	}
	return value;
}

function getExtY2()
{
	var value = 0.0;
	var mapWidget = Fusion.getWidgetById('Map');
	if(mapWidget)
	{
		value = mapWidget.getCurrentExtents().top;
	}
	return value;
}

function zoomToScale(scale)
{
	var mapWidget = Fusion.getWidgetById('Map');
	if(mapWidget)

	{
		mapWidget.zoomToScale(scale);
	}
}


function fusionError(eventId, error) {
    console.log('Fusion Error: \n' + error.toString());
}

function fusionInitialized() {
    $('thePage').resize();
    var map = Fusion.getWidgetById('Map');
    var l = new Jx.Layout($('Toolbar').childNodes[0]);
    l.resize();
    var widgets = Fusion.getWidgetsByType('ActivityIndicator');
    Element.addClassName(widgets[0].domObj, 'activityIndicator');
}

</script>
</head>

<body>
<div id="thePage" style="visibility: hidden">
    <div id="Main">
        <div id="Toolbar"></div>
        <div id="Map"></div>
    </div>
</div>
<div id="ActivityIndicator" style="visibility: hidden;">
    <img src="images/icon_loading.gif" width="30" height="14">
</div>
</body>
</html>